# ==================================================
# iMessage MLX Chatbot - Environment Configuration
# ==================================================
# Copy this file to .env and update with your values:
#   cp .env.example .env
#   nano .env
# ==================================================

# --------------------------------------------------
# CHATBOT SETTINGS (Required)
# --------------------------------------------------

# Enable the chatbot (true/false)
CHATBOT_ENABLED=true

# Comma-separated list of phone numbers/emails to respond to
# Include country code for phone numbers (e.g., +1 for US)
ALLOWED_CONTACTS=+15551234567,+15559876543

# System prompt that defines the AI's personality
SYSTEM_PROMPT="You are a helpful AI assistant responding via iMessage. Keep responses concise and conversational."

# --------------------------------------------------
# MLX API SETTINGS
# --------------------------------------------------

# URL of the MLX API server
MLX_API_URL=http://localhost:8000

# Model to use (from mlx-community on Hugging Face)
# Options:
#   - mlx-community/Llama-3.2-1B-Instruct-4bit  (fast, ~2GB)
#   - mlx-community/Llama-3.2-3B-Instruct-4bit  (balanced, ~4GB) [RECOMMENDED]
#   - mlx-community/Mistral-7B-Instruct-v0.3-4bit (quality, ~6GB)
MLX_MODEL=mlx-community/Llama-3.2-3B-Instruct-4bit

# Server host and port
MLX_HOST=0.0.0.0
MLX_PORT=8000

# --------------------------------------------------
# GENERATION PARAMETERS
# --------------------------------------------------

# Maximum tokens in model response (default: 512)
MAX_TOKENS=512

# Creativity level 0.0-1.0 (default: 0.7)
# Lower = more focused, Higher = more creative
TEMPERATURE=0.7

# Number of previous messages to include for context (default: 10)
MAX_CONTEXT_MESSAGES=10

# MLX safety limits
MLX_MAX_INPUT_TOKENS=2048
MLX_MAX_OUTPUT_TOKENS=1024
MLX_REQUEST_TIMEOUT=60000

# Cooldown between responses in milliseconds (default: 2000)
RESPONSE_COOLDOWN=2000

# --------------------------------------------------
# LOGGING
# --------------------------------------------------

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Node environment: development or production
NODE_ENV=development

# --------------------------------------------------
# OPTIONAL: Redis (for advanced features)
# --------------------------------------------------

# Redis URL for caching/sync (optional)
# REDIS_URL=redis://localhost:6379

# --------------------------------------------------
# OPTIONAL: Cloudflare R2 (for attachment storage)
# --------------------------------------------------

# R2_ACCOUNT_ID=your_account_id
# R2_ACCESS_KEY_ID=your_access_key
# R2_SECRET_ACCESS_KEY=your_secret_key
# R2_BUCKET_NAME=imessage-attachments
# R2_PUBLIC_URL=https://your-bucket.r2.cloudflarestorage.com

# --------------------------------------------------
# OPTIONAL: Server Sync (for remote relay)
# --------------------------------------------------

# If connecting to a remote server
# SERVER_URL=http://localhost:3000
# MAC_API_KEY=your-api-key-here

# ==================================================
# FAMILY DAILY GIFT SYSTEM
# ==================================================
# Sends personalized daily messages to family members
# using OpenRouter for generation and web search

# --------------------------------------------------
# GIFT SYSTEM SETTINGS
# --------------------------------------------------

# Enable the gift system (true/false)
GIFT_SYSTEM_ENABLED=false

# Path to family profiles JSON configuration
FAMILY_PROFILES_PATH=./config/family-profiles.json

# Path to Handlebars prompt templates
PROMPTS_PATH=./prompts

# --------------------------------------------------
# OPENROUTER API (for proactive messages)
# --------------------------------------------------

# OpenRouter API key (get from https://openrouter.ai)
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxxxxxxxxxx

# Model for text generation
# Options:
#   - anthropic/claude-3.5-sonnet (recommended)
#   - openai/gpt-4-turbo
#   - anthropic/claude-3-opus
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# --------------------------------------------------
# SERPER WEB SEARCH (for real-time information)
# --------------------------------------------------

# Serper.dev API key (get from https://serper.dev)
# Used for Google search results in daily messages
SERPER_API_KEY=your-serper-api-key

# --------------------------------------------------
# IMAGE GENERATION (optional)
# --------------------------------------------------

# Image generation model
# Options:
#   - black-forest-labs/flux-1.1-pro (~$0.04/image)
#   - black-forest-labs/flux-schnell (free tier)
IMAGE_MODEL=black-forest-labs/flux-1.1-pro

# Local path to save generated images
IMAGE_SAVE_PATH=~/Pictures/FamilyGifts

# macOS Photos.app album name
PHOTOS_ALBUM_NAME=Family Gifts

# Whether to import images to Photos.app
PHOTOS_ENABLED=true

# --------------------------------------------------
# TESTING/DEVELOPMENT
# --------------------------------------------------

# Override recipient for all messages (useful for testing)
# TEST_RECIPIENT=+15551234567
